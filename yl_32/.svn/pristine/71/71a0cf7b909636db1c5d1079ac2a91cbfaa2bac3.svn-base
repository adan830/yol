
local tbNpc = Npc:GetClass("ty_chuansong")

function tbNpc:OnDialog(pDialogNpc)
	-- 通用传送人，点击直接将玩家传送至需要传送的地点
	--注：该传送不会影响任何锁流程，若该npc关联某些锁相关操作，许注意

	local nTemplateId = pDialogNpc.dwTemplateId;

	-- added here

	local tbPos = {
	--[npcTId] = {nSceneId, nX, nY, nZ},
	[2009] = {234,1059,682,1048576},
	[5150] = {3, 2794, 4975, 1048576},
	[5151] = {3, 6293, 3410, 1048576},
	[1020] = {500, 6595, 5900, 1048576},  --惊现陡坡（普通）
	[1028] = {520, 6595, 5900, 1048576},  --惊现陡坡（困难）
	[1050] = {501, 1152, 1027, 1048576},  --密室逃脱（普通）
	[1051] = {501, 3103, 4589, 1048576},
	[1052] = {501, 6970, 719, 1048576},
	[1053] = {501, 4733, 1001, 1048576},
	[1084] = {521, 1152, 1027, 1048576},  --密室逃脱（困难）
	[1085] = {521, 3103, 4589, 1048576},
	[1086] = {521, 4733, 1001, 1048576},
	[5153] = {0, 837, 1930, 1048576},
	[5154] = {0, 3935, 4432, 1048576},
	[5155] = {0, 1693, 3493, 1048576},
	[5156] = {0, 1683, 2675, 1048576},
	[5157] = {0, 3520, 6384, 1048576},
	[5158] = {0, 2615, 6400, 1048576},
	[5159] = {0, 6599, 4692, 1048576},
	[5160] = {0, 6612, 5468, 1048576},
	[5161] = {0, 5064, 1803, 1048576},
	[5162] = {0, 5739, 1802, 1048576},
	[1168] = {503, 1701,5348, 1048576}, --关卡荒野求生trap1
	[1169] = {503, 1905,5480, 1048576}, --关卡荒野求生trap2
	[1115] = {502, 6220,5164, 1048576}, --关卡巨手之怒trap点
	[1259] = {502, 6323,7167, 1048576}, --群魔来袭传送点（普通）
	[1260] = {522, 6323,7167, 1048576}, --群魔来袭传送点（困难）
	[1261] = {300, 5849,3171, 1048576}, --减速炮台传送点
	[1281] = {300, 4748,6917, 1048576}, --减速炮台传送点
	[1300] = {301, 3018,7006, 1048576}, --密室寻宝-房间1          --普通
	[1301] = {301, 3029,6138, 1048576}, --密室寻宝-房间2
	[1302] = {301, 1763,4849, 1048576}, --密室寻宝-房间3
	[1303] = {301, 939,4847, 1048576}, --密室寻宝-房间4
	[1308] = {301, 1283, 6892, 1048576}, --密室寻宝-第一层返回水晶
	[1309] = {301, 1283, 6892, 1048576}, --密室寻宝-第一层返回水晶
	[1311] = {301, 5557, 6779, 1048576}, --密室寻宝-进入下一层
	[1315] = {301, 7194,7006, 1048576}, --密室寻宝-房间1
	[1316] = {301, 7194,6138, 1048576}, --密室寻宝-房间2
	[1317] = {301, 5927,4849, 1048576}, --密室寻宝-房间3
	[1318] = {301, 5123,4847, 1048576}, --密室寻宝-房间4
	[1323] = {301, 5557, 6779, 1048576}, --密室寻宝-第一层返回水晶
	[1324] = {301, 5557, 6779, 1048576}, --密室寻宝-第一层返回水晶
	[1326] = {301, 1393, 2440, 1048576}, --密室寻宝-进入下一层
	[1330] = {301, 3024,2652, 1048576}, --密室寻宝-房间1
	[1331] = {301, 3034,1846, 1048576}, --密室寻宝-房间2
	[1332] = {301, 1757,503, 1048576}, --密室寻宝-房间3
	[1333] = {301, 952,506, 1048576}, --密室寻宝-房间4
	[1338] = {301, 1393, 2440, 1048576}, --密室寻宝-第一层返回水晶
	[1339] = {301, 1393, 2440, 1048576}, --密室寻宝-第一层返回水晶
	[1341] = {301, 5787, 1735, 1048576}, --密室寻宝-进入下一层
	[1348] = {316, 3018,7006, 1048576}, --密室寻宝-房间1           --困难
	[1349] = {316, 3029,6138, 1048576}, --密室寻宝-房间2
	[1350] = {316, 1763,4849, 1048576}, --密室寻宝-房间3
	[1351] = {316, 939,4847, 1048576}, --密室寻宝-房间4
	[1352] = {316, 1283, 6892, 1048576}, --密室寻宝-第一层返回水晶
	[1353] = {316, 1283, 6892, 1048576}, --密室寻宝-第一层返回水晶
	[1354] = {316, 5557, 6779, 1048576}, --密室寻宝-进入下一层
	[1355] = {316, 7194,7006, 1048576}, --密室寻宝-房间1
	[1356] = {316, 7194,6138, 1048576}, --密室寻宝-房间2
	[1357] = {316, 5927,4849, 1048576}, --密室寻宝-房间3
	[1358] = {316, 5123,4847, 1048576}, --密室寻宝-房间4
	[1359] = {316, 5557, 6779, 1048576}, --密室寻宝-第一层返回水晶
	[1360] = {316, 5557, 6779, 1048576}, --密室寻宝-第一层返回水晶
	[1361] = {316, 1393, 2440, 1048576}, --密室寻宝-进入下一层
	[1362] = {316, 3024,2652, 1048576}, --密室寻宝-房间1
	[1363] = {316, 3034,1846, 1048576}, --密室寻宝-房间2
	[1364] = {316, 1757,503, 1048576}, --密室寻宝-房间3
	[1365] = {316, 952,506, 1048576}, --密室寻宝-房间4
	[1366] = {316, 1393, 2440, 1048576}, --密室寻宝-第一层返回水晶
	[1367] = {316, 1393, 2440, 1048576}, --密室寻宝-第一层返回水晶
	[1368] = {316, 5787, 1735, 1048576}, --密室寻宝-进入下一层
	[1440] = {503, 5852, 6112, 1048576}, --斗破三界-魔――》人       --普通
	[1441] = {523, 5852, 6112, 1048576}, --斗破三界-魔――》人       --困难
	[1442] = {523, 7219, 405, 1048576}, --斗破三界-人――》神        --困难
	[1443] = {503, 7219, 405, 1048576}, --斗破三界-人――》神
	[1444] = {523, 2344, 1466, 1048576}, --斗破三界-神――》魔       --困难
	[1445] = {503, 2344, 1466, 1048576}, --斗破三界-神――》魔
		--nSceneId填0则传送至本地图的对应点;
	};
	local nSelfSceneId = me.GetPosition().dwSceneId;

	if (tbPos[nTemplateId] and type(tbPos[nTemplateId]) == "table" and #tbPos[nTemplateId] == 4) then
		if tbPos[nTemplateId][1] == 0 then
			tbPos[nTemplateId][1] = nSelfSceneId;
		end
		local tbP = tbPos[nTemplateId];
		me.TeleportTo(tbP[1], tbP[2], tbP[3], tbP[4]);
	else
		local szFailMsg = string.format(Lang.npc.str97[Lang.Idx]);
		me.SendBlackMsg(szFailMsg);
	end
end;
